<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wolfking.jeesite.modules.fi.dao.CustomerBlockCurrencyDao">

    <select id="getCustomerBlockCurrencyList" parameterType="Map" resultType="CustomerCurrency">
        SELECT
                a.id,
                a.customer_id     AS "customer.id",
                a.currency_type,
                a.currency_no,
                a.before_balance,
                a.balance,
                a.amount,
                a.payment_type,
                a.action_type,
                a.create_date,
                a.update_date,
                a.remarks,
                0                   AS "customerFinance.blockAmount"
        FROM    fi_customercurrency_block a
        <where>
            a.create_date >= #{beginDate} AND <![CDATA[ a.create_date < #{endDate} ]]>
            <if test="customerId != null">
                AND a.customer_id = #{customerId}
            </if>
            <if test="currencyType != null">
                AND a.currency_type = #{currencyType}
            </if>
            <if test="currencyNo != null and currencyNo != ''">
                AND a.currency_no = #{currencyNo}
            </if>
        </where>
        ORDER BY a.id DESC
    </select>

</mapper>
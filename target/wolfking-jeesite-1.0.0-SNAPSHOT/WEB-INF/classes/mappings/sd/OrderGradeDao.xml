<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wolfking.jeesite.modules.sd.dao.OrderGradeDao">

	<!-- 客评 -->
	<insert id="insertOrderGrade">
		insert into sd_order_grade
		(
			quarter,
			order_id,
			order_no,
			servicepoint_id,
			engineer_id,
			auto_grade_flag,
			point,
			time_liness,
			content,
			create_by,
			create_date
		)
		values (
			#{quarter},
			#{orderId},
			#{orderNo},
			#{servicePoint.id},
			#{engineer.id},
			#{autoGradeFlag},
			#{point},
			#{timeLiness},
			#{content},
			#{createBy.id},
			#{createDate}
		)
	</insert>

	<!-- 查询订单已评价项目 -->
	<select id="getOrderGradeByOrderId" resultType="OrderGradeModel">
		select
			id,order_id,order_no,servicepoint_id as 'servicePoint.id',engineer_id as 'engineer.id',
			auto_grade_flag,point,time_liness,content,create_by as 'createBy.id',create_date
		from sd_order_grade
		where
			<if test="quarter != null and quarter != ''.trim()">quarter = #{quarter} and</if>
			order_id= #{orderId}
		limit 1
	</select>


</mapper>
